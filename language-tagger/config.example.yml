# Langarr Configuration Example
#
# API keys and URLs are loaded from environment variables (via docker-compose.yml env_file)
# Required env vars: RADARR_URL, RADARR_API_KEY, SONARR_URL, SONARR_API_KEY
#
# For multiple instances, use: RADARR_INSTANCENAME_URL, RADARR_INSTANCENAME_API_KEY
# For Overseerr (optional): OVERSEERR_URL, OVERSEERR_API_KEY

schedule:
  interval_hours: 24
  run_on_startup: true

# ============================================================================
# WEBHOOK SERVER (OPTIONAL - for real-time Seerr/Overseerr integration)
# ============================================================================
# Enable this for instant profile updates when users request media via Overseerr
# Highly recommended if you have auto-approve enabled
webhook:
  enabled: false            # Set to true to enable webhook server
  port: 5678                # Port to listen on (default: 5678)
  auth_token: "your-secure-random-token-here"  # REQUIRED for security - change this!
                            # Generate with: openssl rand -base64 32
                            # Send this token in Overseerr webhook as X-Auth-Token header

# ============================================================================
# OVERSEERR INTEGRATION (OPTIONAL - remove/comment this section to disable)
# ============================================================================
# Automatically sets correct quality profiles on Overseerr requests
# BEFORE they are sent to Radarr/Sonarr
overseerr:
  main:                     # Instance name (can be anything)
    enabled: true           # Set to false to disable this instance

    # Connection details (loaded from env vars if not specified)
    # base_url: loaded from OVERSEERR_URL env var
    # api_key: loaded from OVERSEERR_API_KEY env var

    # Map Overseerr server IDs to langarr instance names
    # To find server IDs: Settings → Services → click server → check URL
    # Example: /settings/services/radarr/0 → ID is 0
    # Note: Some Seerr/Overseerr instances use ID 0 for the first/default server
    radarr_servers:
      0: main               # Overseerr Radarr server ID 0 → langarr radarr.main
      # 1: 4k               # Example: If you have multiple Radarr servers

    sonarr_servers:
      0: main               # Overseerr Sonarr server ID 0 → langarr sonarr.main
      # 1: 4k               # Example: If you have multiple Sonarr servers

    # Polling interval for pending requests (only used if webhook.enabled = false)
    poll_interval_minutes: 10

# ============================================================================
# RADARR INSTANCES
# ============================================================================
radarr:
  main:                     # Instance name (must match RADARR_URL / RADARR_API_KEY env vars)
    enabled: true
    # base_url and api_key loaded from env: RADARR_URL, RADARR_API_KEY
    tag_name: prefer-dub    # Tag to apply to dubbed content
    original_profile: Original Preferred   # Profile for original language content
    dub_profile: Dub Preferred             # Profile for content that should be dubbed
    original_languages:
      - en  # English
      - de  # German
      # Add more languages that should use "original" quality profile

    # Triggered Search Options
    trigger_search_on_update: true      # Auto-search after profile update (default: true)
    search_cooldown_seconds: 60         # Don't search same item within 60s (default: 60)
    min_search_interval_seconds: 5      # Min time between ANY searches (default: 5)

  # Example: 4K instance (uncomment and configure if needed)
  # 4k:
  #   enabled: true
  #   # base_url and api_key loaded from env: RADARR_4K_URL, RADARR_4K_API_KEY
  #   tag_name: prefer-dub
  #   original_profile: Original Preferred 4K
  #   dub_profile: Dub Preferred 4K
  #   original_languages:
  #     - en
  #     - de
  #   trigger_search_on_update: true
  #   search_cooldown_seconds: 60
  #   min_search_interval_seconds: 5

# ============================================================================
# SONARR INSTANCES
# ============================================================================
sonarr:
  main:                     # Instance name (must match SONARR_URL / SONARR_API_KEY env vars)
    enabled: true
    # base_url and api_key loaded from env: SONARR_URL, SONARR_API_KEY
    tag_name: prefer-dub    # Tag to apply to dubbed content
    original_profile: Original Preferred   # Profile for original language content
    dub_profile: Dub Preferred             # Profile for content that should be dubbed
    original_languages:
      - en  # English
      - de  # German
      # Add more languages that should use "original" quality profile

    # Triggered Search Options
    trigger_search_on_update: true      # Auto-search after profile update (default: true)
    search_cooldown_seconds: 60         # Don't search same item within 60s (default: 60)
    min_search_interval_seconds: 5      # Min time between ANY searches (default: 5)

  # Example: Anime instance (uncomment and configure if needed)
  # anime:
  #   enabled: true
  #   # base_url and api_key loaded from env: SONARR_ANIME_URL, SONARR_ANIME_API_KEY
  #   tag_name: prefer-dub
  #   original_profile: Anime Original
  #   dub_profile: Anime Dub
  #   original_languages:
  #     - en
  #   trigger_search_on_update: true
  #   search_cooldown_seconds: 60
  #   min_search_interval_seconds: 5

# ============================================================================
# AUDIO TRACK TAGGING (OPTIONAL - tag media based on actual audio tracks)
# ============================================================================
# Scans downloaded files and adds tags based on detected audio languages.
# Unlike profile assignment (which uses original language metadata), this
# inspects the actual mediaInfo of imported files.
#
# Use case: Tag all movies/shows that have a German audio track, regardless
# of the content's original language.
audio_tags:
  enabled: false              # Set to true to enable audio track tagging
  scan_interval_hours: 24     # How often to scan for new files (default: 24)
  scan_on_startup: true       # Scan immediately on startup (default: true)

  # Language-to-tag mappings for Radarr
  # Scans movieFile.mediaInfo.audioLanguages for each language
  radarr:
    main:                     # Must match instance name in radarr section above
      tags:
        - language: de        # Language to detect (ISO 639-1 code or full name)
          tag_name: german-audio
        - language: en
          tag_name: english-audio
        # Add more language/tag pairs as needed
        # - language: fr
        #   tag_name: french-audio

  # Language-to-tag mappings for Sonarr
  # Scans episodeFile.mediaInfo.audioLanguages for each episode
  sonarr:
    main:                     # Must match instance name in sonarr section above
      tags:
        - language: de
          tag_name: german-audio
        - language: en
          tag_name: english-audio
