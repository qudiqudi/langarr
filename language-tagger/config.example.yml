# Langarr Configuration Example
#
# API keys and URLs are loaded from environment variables (via docker-compose.yml env_file)
# Required env vars: RADARR_URL, RADARR_API_KEY, SONARR_URL, SONARR_API_KEY
#
# For multiple instances, use: RADARR_INSTANCENAME_URL, RADARR_INSTANCENAME_API_KEY
# For Overseerr (optional): OVERSEERR_URL, OVERSEERR_API_KEY

schedule:
  interval_hours: 24
  run_on_startup: true
  # Audio track tagging schedule (only used if audio_tags configured in instances)
  audio_scan_interval_hours: 24   # How often to scan for audio tracks (default: 24)
  audio_scan_on_startup: true     # Scan audio tracks on startup (default: true)

# ============================================================================
# WEBHOOK SERVER (OPTIONAL - for real-time Seerr/Overseerr integration)
# ============================================================================
# Enable this for instant profile updates when users request media via Overseerr
# Highly recommended if you have auto-approve enabled
webhook:
  enabled: false            # Set to true to enable webhook server
  port: 5678                # Port to listen on (default: 5678)
  auth_token: "your-secure-random-token-here"  # REQUIRED for security - change this!
                            # Generate with: openssl rand -base64 32
                            # Send this token in Overseerr webhook as X-Auth-Token header

# ============================================================================
# OVERSEERR INTEGRATION (OPTIONAL - remove/comment this section to disable)
# ============================================================================
# Automatically sets correct quality profiles on Overseerr requests
# BEFORE they are sent to Radarr/Sonarr
overseerr:
  main:                     # Instance name (can be anything)
    enabled: true           # Set to false to disable this instance

    # Connection details (loaded from env vars if not specified)
    # base_url: loaded from OVERSEERR_URL env var
    # api_key: loaded from OVERSEERR_API_KEY env var

    # Map Overseerr server IDs to langarr instance names
    # To find server IDs: Settings → Services → click server → check URL
    # Example: /settings/services/radarr/0 → ID is 0
    # Note: Some Seerr/Overseerr instances use ID 0 for the first/default server
    radarr_servers:
      0: main               # Overseerr Radarr server ID 0 → langarr radarr.main
      # 1: 4k               # Example: If you have multiple Radarr servers

    sonarr_servers:
      0: main               # Overseerr Sonarr server ID 0 → langarr sonarr.main
      # 1: 4k               # Example: If you have multiple Sonarr servers

    # Polling interval for pending requests (only used if webhook.enabled = false)
    poll_interval_minutes: 10

# ============================================================================
# RADARR INSTANCES
# ============================================================================
radarr:
  main:                     # Instance name (must match RADARR_URL / RADARR_API_KEY env vars)
    enabled: true
    # base_url and api_key loaded from env: RADARR_URL, RADARR_API_KEY
    tag_name: prefer-dub    # Tag to apply to dubbed content
    original_profile: Original Preferred   # Profile for original language content
    dub_profile: Dub Preferred             # Profile for content that should be dubbed
    original_languages:
      - en  # English
      - de  # German
      # Add more languages that should use "original" quality profile

    # Triggered Search Options
    trigger_search_on_update: true      # Auto-search after profile update (default: true)
    search_cooldown_seconds: 60         # Don't search same item within 60s (default: 60)
    min_search_interval_seconds: 5      # Min time between ANY searches (default: 5)

    # Monitoring Filter
    only_monitored: false               # Only process monitored items (default: false)

    # Audio Track Tagging (OPTIONAL)
    # Tags media based on actual audio tracks in downloaded files.
    # Use case: Tag all movies with German audio, regardless of original language.
    audio_tags:
      - language: de        # ISO 639-1 code or full name (German, English, etc.)
        tag_name: german-audio
      - language: en
        tag_name: english-audio
      # - language: fr
      #   tag_name: french-audio

  # Example: 4K instance (uncomment and configure if needed)
  # 4k:
  #   enabled: true
  #   # base_url and api_key loaded from env: RADARR_4K_URL, RADARR_4K_API_KEY
  #   tag_name: prefer-dub
  #   original_profile: Original Preferred 4K
  #   dub_profile: Dub Preferred 4K
  #   original_languages:
  #     - en
  #     - de
  #   trigger_search_on_update: true
  #   search_cooldown_seconds: 60
  #   min_search_interval_seconds: 5
  #   only_monitored: false
  #   audio_tags:
  #     - language: de
  #       tag_name: german-audio

# ============================================================================
# SONARR INSTANCES
# ============================================================================
sonarr:
  main:                     # Instance name (must match SONARR_URL / SONARR_API_KEY env vars)
    enabled: true
    # base_url and api_key loaded from env: SONARR_URL, SONARR_API_KEY
    tag_name: prefer-dub    # Tag to apply to dubbed content
    original_profile: Original Preferred   # Profile for original language content
    dub_profile: Dub Preferred             # Profile for content that should be dubbed
    original_languages:
      - en  # English
      - de  # German
      # Add more languages that should use "original" quality profile

    # Triggered Search Options
    trigger_search_on_update: true      # Auto-search after profile update (default: true)
    search_cooldown_seconds: 60         # Don't search same item within 60s (default: 60)
    min_search_interval_seconds: 5      # Min time between ANY searches (default: 5)

    # Monitoring Filter
    only_monitored: false               # Only process monitored items (default: false)

    # Audio Track Tagging (OPTIONAL)
    # Tags series based on actual audio tracks in downloaded episodes.
    # Series is tagged if ANY episode has the audio track.
    audio_tags:
      - language: de
        tag_name: german-audio
      - language: en
        tag_name: english-audio

  # Example: Anime instance (uncomment and configure if needed)
  # anime:
  #   enabled: true
  #   # base_url and api_key loaded from env: SONARR_ANIME_URL, SONARR_ANIME_API_KEY
  #   tag_name: prefer-dub
  #   original_profile: Anime Original
  #   dub_profile: Anime Dub
  #   original_languages:
  #     - en
  #   trigger_search_on_update: true
  #   search_cooldown_seconds: 60
  #   min_search_interval_seconds: 5
  #   only_monitored: false
  #   audio_tags:
  #     - language: ja
  #       tag_name: japanese-audio
